{% extends "base.html" %}
{% block content %}
<h1>Dashboard</h1>

<p><b>Pay Period:</b> {{ period_start }} → {{ period_end }}</p>
<p><b>Next Payday:</b> {{ next_payday }}</p>

<ul>
  <li><b>Typical Net Pay:</b> ${{ typical }}</li>
  <li><b>Extra Income (this period):</b> ${{ income }}</li>
  <li><b>Expenses (this period):</b> ${{ expense }}</li>
  <li><b>Remaining:</b> ${{ remaining }}</li>
  <li><b>Daily Spend Limit:</b> ${{ daily_limit }}</li>
</ul>

<hr>

<h2>Smart Spending Forecast</h2>

<p><b>Average daily spending (this period):</b> ${{ avg_spend }}</p>
<p><b>Safe to spend today:</b> ${{ safe_to_spend_today }}</p>

{% if overspending %}
  <p style="color:red;">
    At this pace, you may run out of money before payday.
  </p>
{% else %}
  <p style="color:green;">
    You are on track to stay within budget.
  </p>
{% endif %}


{% if top_category %}
<p><b>Top spending:</b> {{ top_category }} (${{ top_total }})</p>
{% endif %}

<h2>Bills Due Before Payday</h2>

{% if bills_due and bills_due|length > 0 %}
  <p><b>Total due:</b> ${{ bills_total }}</p>
  <p><b>After bills you’ll have:</b> ${{ after_bills }}</p>

  <ul>
    {% for b in bills_due %}
      <li>{{ b.name }} — ${{ b.amount }} (due {{ b.due }})</li>
    {% endfor %}
  </ul>
{% else %}
  <p>No bills due before your next payday </p>
{% endif %}

{% endblock %}

